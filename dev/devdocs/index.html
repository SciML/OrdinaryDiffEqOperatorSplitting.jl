<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developer documentation · OrdinaryDiffEqOperatorSplitting.jl</title><meta name="title" content="Developer documentation · OrdinaryDiffEqOperatorSplitting.jl"/><meta property="og:title" content="Developer documentation · OrdinaryDiffEqOperatorSplitting.jl"/><meta property="twitter:title" content="Developer documentation · OrdinaryDiffEqOperatorSplitting.jl"/><meta name="description" content="Documentation for OrdinaryDiffEqOperatorSplitting.jl."/><meta property="og:description" content="Documentation for OrdinaryDiffEqOperatorSplitting.jl."/><meta property="twitter:description" content="Documentation for OrdinaryDiffEqOperatorSplitting.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">OrdinaryDiffEqOperatorSplitting.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li><a class="tocitem" href="../topics/time-integration/">Theory Manual</a></li><li><a class="tocitem" href="../api-reference/">API Reference</a></li><li class="is-active"><a class="tocitem" href>Developer documentation</a><ul class="internal"><li><a class="tocitem" href="#Synchronizers-API"><span>Synchronizers API</span></a></li><li><a class="tocitem" href="#Adding-Synchronizers"><span>Adding Synchronizers</span></a></li><li><a class="tocitem" href="#Adding-Solvers"><span>Adding Solvers</span></a></li></ul></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Developer documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Developer documentation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl/blob/main/docs/src/devdocs/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Developer-documentation"><a class="docs-heading-anchor" href="#Developer-documentation">Developer documentation</a><a id="Developer-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Developer-documentation" title="Permalink"></a></h1><h2 id="Synchronizers-API"><a class="docs-heading-anchor" href="#Synchronizers-API">Synchronizers API</a><a id="Synchronizers-API-1"></a><a class="docs-heading-anchor-permalink" href="#Synchronizers-API" title="Permalink"></a></h2><p>A key part of operator splitting algorithms in the synchronization logic. Parameters of one subproblem might need to be kept in sync with the solution of other subproblems and vice versa. To handle this efficiently OrdinaryDiffEqOperatorSplitting.jl provides a small set of utils.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OrdinaryDiffEqOperatorSplitting.NoExternalSynchronization" href="#OrdinaryDiffEqOperatorSplitting.NoExternalSynchronization"><code>OrdinaryDiffEqOperatorSplitting.NoExternalSynchronization</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NoExternalSynchronization()</code></pre><p>Indicator that no synchronization between parameters and solution vectors is necessary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl/blob/4509d5c8644bba14e44d3e0842679e9a6dbbe03d/src/function.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OrdinaryDiffEqOperatorSplitting.forward_sync_subintegrator!" href="#OrdinaryDiffEqOperatorSplitting.forward_sync_subintegrator!"><code>OrdinaryDiffEqOperatorSplitting.forward_sync_subintegrator!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> forward_sync_subintegrator!(outer_integrator::OperatorSplittingIntegrator, inner_integrator::DiffEqBase.DEIntegrator, solution_indices, sync)</code></pre><p>This function is responsible of copying the solution and parameters of the outer integrator and the synchronized subintegrators with the information given into the inner integrator. If the inner integrator is synchronized with other inner integrators using <code>sync</code>, the function <code>forward_sync_external!</code> shall be dispatched for <code>sync</code>. The <code>sync</code> object is passed from the outside and is the main entry point to dispatch custom types on for parameter synchronization. The <code>solution_indices</code> are global indices in the outer integrators solution vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl/blob/4509d5c8644bba14e44d3e0842679e9a6dbbe03d/src/utils.jl#L50-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OrdinaryDiffEqOperatorSplitting.backward_sync_subintegrator!" href="#OrdinaryDiffEqOperatorSplitting.backward_sync_subintegrator!"><code>OrdinaryDiffEqOperatorSplitting.backward_sync_subintegrator!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">backward_sync_subintegrator!(outer_integrator::OperatorSplittingIntegrator, inner_integrator::DiffEqBase.DEIntegrator, solution_indices, sync)</code></pre><p>This function is responsible of copying the solution of the inner integrator back into outer integrator and the synchronized subintegrators. If the inner integrator is synchronized with other inner integrators using <code>sync</code>, the function <code>backward_sync_external!</code> shall be dispatched for <code>sync</code>. The <code>sync</code> object is passed from the outside and is the main entry point to dispatch custom types on for parameter synchronization. The <code>solution_indices</code> are global indices in the outer integrators solution vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl/blob/4509d5c8644bba14e44d3e0842679e9a6dbbe03d/src/utils.jl#L64-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OrdinaryDiffEqOperatorSplitting.need_sync" href="#OrdinaryDiffEqOperatorSplitting.need_sync"><code>OrdinaryDiffEqOperatorSplitting.need_sync</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">need_sync(a, b)</code></pre><p>This function determines whether it is necessary to synchronize two objects with any solution information. A possible reason when no syncronization is necessary might be that the vectors alias each other in memory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl/blob/4509d5c8644bba14e44d3e0842679e9a6dbbe03d/src/utils.jl#L26-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OrdinaryDiffEqOperatorSplitting.sync_vectors!" href="#OrdinaryDiffEqOperatorSplitting.sync_vectors!"><code>OrdinaryDiffEqOperatorSplitting.sync_vectors!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sync_vectors!(a, b)</code></pre><p>Copies the information in object b into object a, if syncronization is necessary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl/blob/4509d5c8644bba14e44d3e0842679e9a6dbbe03d/src/utils.jl#L39-L43">source</a></section></article><h2 id="Adding-Synchronizers"><a class="docs-heading-anchor" href="#Adding-Synchronizers">Adding Synchronizers</a><a id="Adding-Synchronizers-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Synchronizers" title="Permalink"></a></h2><div class="admonition is-warning" id="Warning-7b857c8cf54402e4"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-7b857c8cf54402e4" title="Permalink"></a></header><div class="admonition-body"><p>The API is not stable yet and subject to breaking changes.</p></div></div><p>You need to provide dispatches for</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OrdinaryDiffEqOperatorSplitting.forward_sync_subintegrator!-devdocs-index" href="#OrdinaryDiffEqOperatorSplitting.forward_sync_subintegrator!-devdocs-index"><code>OrdinaryDiffEqOperatorSplitting.forward_sync_subintegrator!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> forward_sync_subintegrator!(outer_integrator::OperatorSplittingIntegrator, inner_integrator::DiffEqBase.DEIntegrator, solution_indices, sync)</code></pre><p>This function is responsible of copying the solution and parameters of the outer integrator and the synchronized subintegrators with the information given into the inner integrator. If the inner integrator is synchronized with other inner integrators using <code>sync</code>, the function <code>forward_sync_external!</code> shall be dispatched for <code>sync</code>. The <code>sync</code> object is passed from the outside and is the main entry point to dispatch custom types on for parameter synchronization. The <code>solution_indices</code> are global indices in the outer integrators solution vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl/blob/4509d5c8644bba14e44d3e0842679e9a6dbbe03d/src/utils.jl#L50-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OrdinaryDiffEqOperatorSplitting.backward_sync_subintegrator!-devdocs-index" href="#OrdinaryDiffEqOperatorSplitting.backward_sync_subintegrator!-devdocs-index"><code>OrdinaryDiffEqOperatorSplitting.backward_sync_subintegrator!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">backward_sync_subintegrator!(outer_integrator::OperatorSplittingIntegrator, inner_integrator::DiffEqBase.DEIntegrator, solution_indices, sync)</code></pre><p>This function is responsible of copying the solution of the inner integrator back into outer integrator and the synchronized subintegrators. If the inner integrator is synchronized with other inner integrators using <code>sync</code>, the function <code>backward_sync_external!</code> shall be dispatched for <code>sync</code>. The <code>sync</code> object is passed from the outside and is the main entry point to dispatch custom types on for parameter synchronization. The <code>solution_indices</code> are global indices in the outer integrators solution vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/OrdinaryDiffEqOperatorSplitting.jl/blob/4509d5c8644bba14e44d3e0842679e9a6dbbe03d/src/utils.jl#L64-L71">source</a></section></article><p>with your custom synchronizer object and add it to the split function construction as follows:</p><pre><code class="language-julia hljs">f1, f2 = generate_individual_functions() # assuming 3 unknowns each
i1, i2 = generate_solution_indices()     # e.g. ([1,2,3], Int[])
synchronizer_tree = generate_my_synchronizer_tree() # e.g. (MySyncronizer([1,2,3]), NoExternalSynchronization())
f = GenericSplitFunction((f1, f2), (i1, i2), synchronizer_tree)
u0 = [-1.0, 1.0, 0.0]
tspan = (0.0, 1.0)
prob = OperatorSplittingProblem(f, u0, tspan)</code></pre><h2 id="Adding-Solvers"><a class="docs-heading-anchor" href="#Adding-Solvers">Adding Solvers</a><a id="Adding-Solvers-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Solvers" title="Permalink"></a></h2><div class="admonition is-warning" id="Warning-7b857c8cf54402e4"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-7b857c8cf54402e4" title="Permalink"></a></header><div class="admonition-body"><p>The API is not stable yet and subject to breaking changes.</p></div></div><p>To add a new solver just define two new structs, one for the algorithm description and one for the algorithm cache and dispatch internal functions, as follows:</p><pre><code class="language-julia hljs">using SciMLBase, OrdinaryDiffEqOperatorSplitting
struct MySimpleFirstOrderAlgorithm{InnerAlgorithmTypes} &lt;:
       OrdinaryDiffEqOperatorSplitting.AbstractOperatorSplittingAlgorithm
    inner_algs::InnerAlgorithmTypes # Tuple of solver for the problem sequence
end

struct MySimpleFirstOrderCache{uType, uprevType, iiType} &lt;:
       OrdinaryDiffEqOperatorSplitting.AbstractOperatorSplittingCache
    u::uType
    uprev::uprevType
    inner_caches::iiType
end

function OrdinaryDiffEqOperatorSplitting.init_cache(
        f::GenericSplitFunction, alg::MySimpleFirstOrderAlgorithm;
        uprev::AbstractArray, u::AbstractVector,
        inner_caches,
        alias_uprev = true,
        alias_u = false
)
    @assert length(inner_caches) == 2
    _uprev = alias_uprev ? uprev : SciMLBase.recursivecopy(uprev)
    _u = alias_u ? u : SciMLBase.recursivecopy(u)
    return MySimpleFirstOrderAlgorithmCache(_u, _uprev, inner_caches)
end

@inline function OrdinaryDiffEqOperatorSplitting.advance_solution_to!(
        outer_integrator::OperatorSplittingIntegrator, subintegrators::Tuple,
        solution_indices::Tuple, synchronizers::Tuple,
        cache::MySimpleFirstOrderAlgorithmCache, tnext)
    # We assume that the integrators are already synced
    @unpack inner_caches = cache

    # Advance first subproblem
    OrdinaryDiffEqOperatorSplitting.forward_sync_subintegrator!(
        outer_integrator, subintegrators[1], solution_indices[1], synchronizers[1])
    OrdinaryDiffEqOperatorSplitting.advance_solution_to!(
        outer_integrator, subintegrators[1], solution_indices[1],
        synchronizers[1], inner_caches[1], tnext)
    if subintegrators[1].sol.retcode ∉
       (SciMLBase.ReturnCode.Default, SciMLBase.ReturnCode.Success)
        return
    end
    OrdinaryDiffEqOperatorSplitting.backward_sync_subintegrator!(
        outer_integrator, subintegrators[1], solution_indices[1], synchronizers[1])

    # Advance second subproblem
    OrdinaryDiffEqOperatorSplitting.forward_sync_subintegrator!(
        outer_integrator, subintegrators[2], solution_indices[2], synchronizers[2])
    OrdinaryDiffEqOperatorSplitting.advance_solution_to!(
        outer_integrator, subintegrators[2], solution_indices[2],
        synchronizers[2], inner_caches[2], tnext)
    if subintegrators[2].sol.retcode ∉
       (SciMLBase.ReturnCode.Default, SciMLBase.ReturnCode.Success)
        return
    end
    OrdinaryDiffEqOperatorSplitting.backward_sync_subintegrator!(
        outer_integrator, subintegrators[2], solution_indices[2], synchronizers[2])

    # Done :)
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../api-reference/">« API Reference</a><a class="docs-footer-nextpage" href="../references/">References »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Thursday 23 October 2025 19:19">Thursday 23 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
